{"version":3,"sources":["components/Names.js","components/Filter.js","components/PersonForm.js","services/names.js","components/NotificationError.js","components/NotificationMessages.js","App.js","index.js"],"names":["Names","persons","shown","removeP","console","log","filtering","filter","person","name","toLowerCase","includes","map","key","number","onClick","id","Filter","handleFind","value","onChange","PersonForm","addPerson","handleNameChange","handleNumberChange","onSubmit","type","baseUrl","axios","get","then","response","data","nameObject","post","put","delete","NotificationError","message","className","NotificationMessages","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","setShown","errorMessage","setErrorMessage","notifications","setNotifications","useEffect","nameService","initialNotes","length","event","target","preventDefault","Math","random","some","setTimeout","num","find","p","window","confirm","update","catch","error","n","returnedNote","concat","res","del","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.19a63154.chunk.js","sourcesContent":["import React from 'react'\r\n\r\n\r\nconst Names = ({ persons, shown, removeP }) => {\r\n  console.log('names');\r\n  const filtering = persons.filter(person => person.name.toLowerCase().includes(shown.toLowerCase()))\r\n\r\n  return (\r\n    <div>\r\n      {filtering.map(person => <div key={person.name}> {person.name} {person.number}\r\n        <button onClick={() => removeP(person.id)}>Delete</button></div>)}\r\n    </div>)\r\n\r\n}\r\nexport default Names\r\n\r\n","import React from 'react'\r\n\r\nconst Filter = ({shown, handleFind}) => {\r\n    return (\r\n        <div>\r\n            filter: <input\r\n                value={shown}\r\n                onChange={handleFind} />\r\n        </div>)\r\n}\r\n\r\nexport default Filter\r\n","import React from 'react'\r\n\r\nconst PersonForm = ({ addPerson, handleNameChange, handleNumberChange, name, number }) => {\r\nreturn (\r\n    <form onSubmit={addPerson}>\r\n    <div>\r\n    name: <input value={name} onChange={handleNameChange} />\r\n    </div>\r\n    <div>\r\n    number: <input value={number} onChange={handleNumberChange} />\r\n    </div>\r\n    <div>\r\n        <button type=\"submit\">add</button>\r\n    </div>\r\n    </form>\r\n)\r\n}\r\nexport default PersonForm","import axios from 'axios'\r\n\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\nconst create = nameObject => {\r\n    const request = axios.post(baseUrl, nameObject)\r\n  return request.then(response => response.data)\r\n}\r\nconst update = (id, nameObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, nameObject)\r\n    return request.then(response => response.data)\r\n}\r\nconst remove = (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nexport default { \r\n    getAll: getAll, \r\n    create: create, \r\n    update: update,\r\n    remove: remove, \r\n}","import React from 'react'\r\n\r\nconst NotificationError = ({ message }) => {\r\n    if (message === null) {\r\n      return null\r\n    }\r\n  \r\n    return (\r\n      <div className=\"error\">\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  export default NotificationError","import React from 'react'\r\n\r\nconst NotificationMessages = ({ message }) => {\r\n    if (message === null) {\r\n      return null\r\n    }\r\n  \r\n    return (\r\n      <div className=\"note\">\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  export default NotificationMessages","import React, { useState, useEffect } from 'react'\r\nimport Names from './components/Names'\r\nimport Filter from './components/Filter'\r\nimport PersonForm from './components/PersonForm'\r\nimport nameService from './services/names'\r\nimport NotificationError from './components/NotificationError'\r\nimport './index.css'\r\nimport NotificationMessages from './components/NotificationMessages'\r\n\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([])\r\n  const [newName, setNewName] = useState('add new name...')\r\n  const [newNumber, setNewNumber] = useState('add new number...')\r\n  const [shown, setShown] = useState('')\r\n  const [errorMessage, setErrorMessage] = useState(null)\r\n  const [notifications, setNotifications] = useState(null)\r\n\r\n  useEffect(() => {\r\n    nameService\r\n      .getAll()\r\n      .then(initialNotes => {\r\n        setPersons(initialNotes)\r\n      })\r\n  }, [])\r\n\r\n  console.log('render', persons.length, 'persons')\r\n\r\n  const removeP = (id) => {\r\n    console.log('pressing delete');\r\n    const p = persons.find(p => p.id === id)\r\n    const r = (window.confirm(`Do you want to delete ${p.name}?`))\r\n    if (r === true) {\r\n      setErrorMessage(`${p.name} was deleted from phonebook!`)\r\n      setTimeout(() => {\r\n        setErrorMessage(null)\r\n      }, 5000)\r\n      nameService\r\n        .remove(id)\r\n        .then(res => {\r\n          const del = persons.filter(person => id !== person.id)\r\n          console.log('deleting', id)\r\n          setPersons(del)\r\n        })\r\n    }\r\n    else {\r\n      return null\r\n    }\r\n  }\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault()\r\n    console.log('button clicked', event.target)\r\n    const nameObject = {\r\n      name: newName,\r\n      number: newNumber,\r\n      id: Math.random() < 0.5,\r\n    }\r\n\r\n    if (persons.some(person => person.name.toLowerCase() === newName.toLowerCase() && person.number === newNumber)) {\r\n      setErrorMessage(`${nameObject.name} is already in phonebook!`)\r\n      setTimeout(() => {\r\n        setErrorMessage(null)\r\n      }, 5000)\r\n    }\r\n    else if (persons.some(person => person.name.toLowerCase() === newName.toLowerCase() && persons.number !== newNumber)) {\r\n      const num = persons.find(p => p.name.toLowerCase() === newName.toLowerCase())\r\n      const g = window.confirm(`${nameObject.name} is already in phonebook, do you wish to update their phonenumber?`)\r\n      if (g === true) {\r\n        nameService\r\n          .update(num.id, nameObject)\r\n          .then(response => {\r\n            const update = persons.map(p => p.id !== num.id ? p : response)\r\n            setPersons(update)\r\n            setNotifications(`Phonenumber of ${nameObject.name} updated!`)\r\n            setTimeout(() => {\r\n              setNotifications(null)\r\n            }, 5000)\r\n          })\r\n          .catch(error => {\r\n            setPersons(persons.filter(n => n.id !== num.id))\r\n            setErrorMessage(`${nameObject.name} was already deleted from server!`)\r\n            setTimeout(() => {\r\n              setErrorMessage(null)\r\n            }, 5000)\r\n          })\r\n      }\r\n      else {\r\n        return null\r\n      }\r\n    }\r\n    else {\r\n      //  setPersons(persons.concat(nameObject))\r\n      setNotifications(`${nameObject.name} was added to phonebook!`)\r\n      setTimeout(() => {\r\n        setNotifications(null)\r\n      }, 5000)\r\n      nameService\r\n        .create(nameObject)\r\n        .then(returnedNote => {\r\n          setPersons(persons.concat(returnedNote))\r\n        })\r\n        .catch(error => {\r\n         setErrorMessage(error.response.data)\r\n         setTimeout(() => {\r\n          setNotifications(null)\r\n        }, 5000)\r\n        })\r\n    }\r\n    setNewName('')\r\n    setNewNumber('')\r\n  }\r\n\r\n  const handleNameChange = (event) => {\r\n    console.log(event.target.value)\r\n    setNewName(event.target.value)\r\n  }\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value)\r\n  }\r\n  const handleFind = (event) => {\r\n    console.log('handlefind gets', event.target.value)\r\n    setShown(event.target.value)\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <NotificationError message={errorMessage} />\r\n      <NotificationMessages message={notifications} />\r\n      <Filter value={shown} handleFind={handleFind} />\r\n\r\n      <h2>Add new contact</h2>\r\n\r\n      <PersonForm addPerson={addPerson} handleNameChange={handleNameChange} handleNumberChange={handleNumberChange} name={newName} number={newNumber} />\r\n\r\n      <h2>Numbers</h2>\r\n\r\n      <Names persons={persons} shown={shown} removeP={removeP} />\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render\n  (<App />,\n    document.getElementById('root'))"],"sourceRoot":""}